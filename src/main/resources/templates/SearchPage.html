<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Search</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/static/css/main.css">
</head>

<body class="font">
<header th:insert="~{Header}"></header>

<div class="row justify-content-center main-content mtb-20px">
    <div th:if="${products != null && !products.isEmpty()}" class="col-lg-3 col-md-4 col-sm-6 mb-4"
         th:each="product : ${products}">
        <a th:href="@{/catalog/{id}(id=${product.getId()})}" class="text-decoration-none text-dark">
            <div class="card">

                <div class="image-container">
                    <div class="loading-animation"></div>
                </div>

                <img id="productImage" th:src="'/static/images/' + ${product.getPath()} + '/main.png'"
                     class="card-img-top" alt="">

                <div class="card-body">
                    <h5 class="card-title text-center" th:text="${product.getName()}">Title</h5>
                </div>
            </div>
        </a>
    </div>

    <div class="text-center" th:if="${products == null || products.isEmpty()}">
        <h2> Nothing found :( </h2>
    </div>
</div>

</body>
</html>

<style>
    .main-content {
        padding-left: 20%;
        padding-right: 20%;
    }

    .mtb-20px {
        margin-top: 20px;
        margin-bottom: 20px;
    }
</style>

<style>
    .image-container {
        position: relative;
    }

    .loading-animation {
        background-color: #f6f7f8;
        background-size: 100px 104px;
        height: 70px;
        position: relative;
        margin-bottom: 20px;
    }

    #productImage {
        display: none;
    }
</style>

<script>
    var img = document.getElementById('productImage');
    var loadingAnimation = document.querySelector('.loading-animation');

    img.addEventListener('load', function () {
        loadingAnimation.style.display = 'none';
        img.style.display = 'block';
    });

</script>